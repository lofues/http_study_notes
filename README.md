### IP
- IP协议是“Internet  Protocol”的缩写，主要目的是解决寻址和路由问题，以及如何在两点间传送数据报。IP协议使用“**IP地址**”的概念来定位互联网上的每一台计算机。
### TCP
- TCP协议是“**T**ransmission **C**ontrol **P**rotocol”的缩写，意思是“传输控制协议”，它位于IP协议之上，基于IP协议提供**可靠的、字节流**形式的通信，是HTTP协议得以实现的基础。  
- “可靠”是指保证数据不丢失，“字节流”是指保证数据完整，所以再TCP协议的两端可以如同操作文件一样访问传输的数据，就像是读写在一个封闭的管道里“流动的字节”
![avatar](./img/tcp_header.png)
### DNS  
- 域名使用字符串来代替IP地址，方便用户记忆，本质上是一个名字空间系统
- DNS是一个树状得分布式查询系统，但为了提高查询效率，外围有多级得缓存；
- 在实际开发中，可以使用bind9等开源软件搭建一个在内部使用得DNS，这样内部服务便不用写死的IP地址了  
-  DNS服务器：根->顶级->权威
-  大部分运营商会自行建立‘野生’DNS服务器，缓存之前得查询结果，避免向跟服务器发起查询
- 访问www.不存在.com的流程  
 &emsp;1、检查本地浏览器dns缓存是否存在解析"www.不存在.com"域名的ip  
    &emsp;2、如果没有找到继续查找本地hosts文件内是否有对应的固定记录  
    &emsp;3、如果hosts中还是没有那就根据本地网卡被分配的 dns server ip 来进行解析，dns server ip 一般是“非官方”的ip，比如谷歌的“8.8.8.8”，本身它也会对查找的域名解析结果进行缓存，如果它没有缓存或者缓存失效，则先去顶级域名服务器“com”去查找“不存在.com”的域名服务器ip，结果发现不存在，于是直接返回告诉浏览器域名解析错误，当然这两次查找过程是基于udp协议
![avatar](./img/dns.png)
### HTTP
- HTTP协议诞生于30年前，设计之初的目的是用来传输纯文本数据。但由于形式灵活，搭配URI、HTML等技术能够把互联网上的资源都联系起来，构成一个复杂的超文本系统，让人们自由地获取信息，所以得到了迅猛发展
- HTTP又多个版本，目前应用最广泛的是HTTP/1.1，它几乎可以说是整个互联网的基石。但HTTP/1.1的性能难以满足如今的高流量网站，于是又出现了HTTP/2和HTTP/3.不过这两个新版本的协议还没有完全推广开。再可预见的将来，HTTP/1.1还会继续存在下去。
- HTTP翻译成中文是“超文本传输协议”，是一个应用层的协议，通常基于TCP/IP，能够再网络的任意两点之间传输文字、图片、音频、视频等数据
- HTTP协议中的两个端点成为**请求方**和**应答方**。请求方通常就是Web浏览器，也叫user agent，应答方是Web服务器，存储着网络上的大部分静态或动态的资源
- 在浏览器和服务器之间还有一些‘中间人’的角色，比如CDN、网关、代理等，它们也同样遵守HTTP协议，可以帮助用户更快速、更安全地获取资源
- HTTP协议不是一个孤立的协议，需要下层很多其他协议的配合，最基本的是TCP/IP，实现寻址、路由和可靠的数据传输，还有DNS协议实现对互联网上主机的定位查找。
- 对HTTP更准确的称呼是**“HTTP over TCP/IP”**，而另一个**“HTTP over SSL/TLS”**就是增加了安全功能的HTTPS
- 浏览器栏输入IP地址'127.0.0.1'的流程  
&emsp;1.使用wireshark抓包，使用openresty模拟http服务器，访问本地80端口（http除了80端口还经常会使用8000、8080）  
&emsp;2.经历tcp的三次握手建立连接：SYN、SYN/ACK、ACK  
&emsp;3.经历http的两次请求:Get '/' 由于回复HTML文件再次请求'  
favicon.ico'网站图标，找不到而返回404  
&emsp;4.tcp的四次挥手断开连接  
![avatar](./img/tcp.png)
### HTTP报文
- HTTP协议也是与TCP/UDP类似，需要在实际传输的数据前附加一些头数据，不过与TCP/UDP不同的是，它是一个“**纯文本**”的协议，所以头数据都是ASCII码的文本，可以很容易地用肉眼阅读，不用接触程序解析也能够看懂
- HTTP协议的请求报文和响应报文的机构基本相同，由三大部分组成：  
&emsp;1.起始行（start line）：描述请求和响应的基本信息  
&emsp;2.头部字段集合（header）：使用key-value形式更详细地说明报文  
&emsp;3.消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片，视频等二进制数据  
Tips：
&emsp;1.这其中前两部分其实头和头部字段经常又合称为“**请求头**”或“**响应头**”，消息正文又称为“实体”，但与“header”对应，很多时候就直接成为“body”。  
&emsp;2.HTTP协议规定报文必须有header，但可以没有body，而且在header之后必须要有一个：“空行”，也就是“CRLF”，十六进制的“0D0A”  

![avatar](./img/http_header.png)